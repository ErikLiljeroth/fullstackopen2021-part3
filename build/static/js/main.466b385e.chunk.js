(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(16),o=n.n(c),a=n(17),u=n(3),i=n(0),s=function(e){var t=e.searchString,n=e.setSearchString;return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},d=function(e){var t=e.addPerson,n=e.newName,r=e.setNewName,c=e.newNumber,o=e.setNewNumber;return Object(i.jsx)("div",{children:Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name:",Object(i.jsx)("input",{value:n,onChange:function(e){return r(e.target.value)}})]}),Object(i.jsxs)("div",{children:["number:",Object(i.jsx)("input",{value:c,onChange:function(e){return o(e.target.value)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})})},l=function(e){var t=e.personsToShow,n=e.handleDelete;return Object(i.jsx)("ul",{children:t.map((function(e){return Object(i.jsxs)("li",{children:[e.name," ",e.number," ",Object(i.jsx)("button",{onClick:function(){return n(e)},children:"delete"})]},e.name)}))})},b=function(e){var t=e.message;if(null===t)return null;return Object(i.jsx)("div",{style:{color:"red",background:"lightgrey",fontStyle:"bold",fontSize:"14",borderStyle:"solid",borderRadius:"5px",padding:"10px"},children:t})},j=function(e){var t=e.message;if(null===t)return null;return Object(i.jsx)("div",{style:{color:"green",background:"lightgrey",fontStyle:"bold",fontSize:"14",borderStyle:"solid",borderRadius:"5px",padding:"10px"},children:t})},f=n(5),h=n.n(f),m="/api/persons",O={getAll:function(){return h.a.get(m)},create:function(e){return h.a.post(m,e)},update:function(e,t){return h.a.put("".concat(m,"/").concat(e),t)},remove:function(e){return h.a.delete("".concat(m,"/").concat(e))}},p=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),f=Object(u.a)(o,2),h=f[0],m=f[1],p=Object(r.useState)(""),g=Object(u.a)(p,2),x=g[0],v=g[1],w=Object(r.useState)(""),S=Object(u.a)(w,2),y=S[0],N=S[1],k=Object(r.useState)(null),T=Object(u.a)(k,2),C=T[0],A=T[1],J=Object(r.useState)(null),D=Object(u.a)(J,2),P=D[0],z=D[1];Object(r.useEffect)((function(){O.getAll().then((function(e){c(e.data)}))}),[]);var E=n.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{message:C}),Object(i.jsx)(b,{message:P}),Object(i.jsx)(s,{searchString:y,setSearchString:N}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(d,{addPerson:function(e){e.preventDefault();var t={name:h,number:x},r=n.find((function(e){return e.name===t.name}));r?window.confirm("".concat(t.name," is already added to phonebook, replace the old number with the new one?"))&&(t.id=r.id,O.update(r.id,t).then((function(e){var t=Object(a.a)(n);t.find((function(t){return t.id===e.data.id})).number=e.data.number,c(t),A("The number of ".concat(r.name," changed to ").concat(e.data.number)),setTimeout((function(){return A(null)}),4e3)})).catch((function(e){0!==Object.entries(e.response.data).length||e.response.data.constructor!==Object?z(JSON.stringify(e.response.data)):z("Failed to update the number of ".concat(r.name)),setTimeout((function(){return z(null)}),4e3),c(n.filter((function(e){return e.id!==t.id})))}))):O.create(t).then((function(e){t.id=e.data.id,c(n.concat(t)),A("Added ".concat(t.name)),setTimeout((function(){return A(null)}),4e3)})).catch((function(e){console.log(e.response.data),z(JSON.stringify(e.response.data)),setTimeout((function(){return z(null)}),4e3)}))},newName:h,setNewName:m,newNumber:x,setNewNumber:v}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(l,{personsToShow:E,handleDelete:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&(O.remove(e.id),c(n.filter((function(t){return t.id!==e.id}))))}})]})};o.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.466b385e.chunk.js.map