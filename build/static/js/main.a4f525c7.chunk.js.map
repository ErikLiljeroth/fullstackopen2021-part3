{"version":3,"sources":["components/SearchFilter.js","components/Personform.js","components/Persons.js","components/Error.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["SearchFilter","searchString","setSearchString","value","onChange","event","target","PersonForm","addPerson","newName","setNewName","newNumber","setNewNumber","onSubmit","type","Persons","personsToShow","handleDelete","map","p","name","number","onClick","Error","message","style","color","background","fontStyle","fontSize","borderStyle","borderRadius","padding","Notification","baseurl","personService","getAll","axios","get","create","newObject","post","update","id","put","remove","delete","App","useState","persons","setPersons","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","useEffect","then","response","data","filter","toLowerCase","includes","preventDefault","personObject","existingPerson","find","P","window","confirm","updatedPerson","updatedPersons","setTimeout","catch","error","concat","person","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a4f525c7.chunk.js","sourcesContent":["import React from 'react'\n\nconst SearchFilter = ({ searchString, setSearchString }) => {\n  const handleSearch = (event) => {\n    setSearchString(event.target.value)\n  }\n\n  return (\n    <div>\n      filter shown with <input value={searchString} onChange={handleSearch} />\n    </div>\n  )\n}\n\nexport default SearchFilter\n","import React from \"react\"\n\nconst PersonForm = ({\n  addPerson,\n  newName,\n  setNewName,\n  newNumber,\n  setNewNumber,\n}) => {\n  return (\n    <div>\n      <form onSubmit={addPerson}>\n        <div>\n          name:\n          <input\n            value={newName}\n            onChange={(event) => setNewName(event.target.value)}\n          />\n        </div>\n        <div>\n          number:\n          <input\n            value={newNumber}\n            onChange={(event) => setNewNumber(event.target.value)}\n          />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default PersonForm\n","import React from \"react\"\n\nconst Persons = ({personsToShow, handleDelete}) => {\n  return (\n    <ul>\n      {personsToShow.map((p) => (\n        <li key={p.name}>\n        {/*Important to remember to put handleDelete as a function to the onClick! */}\n          {p.name} {p.number} <button onClick={() => handleDelete(p)}>delete</button>\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nexport default Persons\n","import React from 'react'\n\nconst Error = ({ message }) => {\n\tif (message === null) {\n\t\treturn null\n\t}\n\n\tconst errorStyle = {\n\t\tcolor: 'red',\n\t\tbackground: 'lightgrey',\n\t\tfontStyle: 'bold',\n\t\tfontSize: '14',\n\t\tborderStyle: 'solid',\n\t\tborderRadius: '5px',\n\t\tpadding: '10px'\n\t}\n\n\treturn (\n\t\t<div style={errorStyle}>\n\t\t\t{message}\n\t\t</div>\n\t)\n}\n\nexport default Error","import React from 'react'\n\nconst Notification = ({ message }) => {\n\tif (message === null) {\n\t\treturn null\n\t}\n\n\tconst notificationStyle = {\n\t\tcolor: 'green',\n\t\tbackground: 'lightgrey',\n\t\tfontStyle: 'bold',\n\t\tfontSize: '14',\n\t\tborderStyle: 'solid',\n\t\tborderRadius: '5px',\n\t\tpadding: '10px'\n\t}\n\n\treturn (\n\t\t<div style={notificationStyle}>\n\t\t\t{message}\n\t\t</div>\n\t)\n}\n\nexport default Notification","import axios from 'axios'\nconst baseurl = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(baseurl)\n}\n\nconst create = newObject => {\n    return axios.post(baseurl, newObject)\n}\n\nconst update = (id, newObject) => {\n    return axios.put(`${baseurl}/${id}`, newObject)\n}\n\nconst remove = (id) => {\n    return axios.delete(`${baseurl}/${id}`)\n}\n\nconst personService = {getAll, create, update, remove}\nexport default personService","import React, { useState, useEffect } from \"react\"\nimport SearchFilter from \"./components/SearchFilter\"\nimport PersonForm from \"./components/Personform\"\nimport Persons from \"./components/Persons\"\nimport Error from './components/Error'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState(\"\")\n  const [newNumber, setNewNumber] = useState(\"\")\n  const [searchString, setSearchString] = useState(\"\")\n  // Message-state for add person and alter data, to set notification\n  const [notificationMessage, setNotificationMessage] = useState(null)\n  // Message-state for error\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  // Initialize persons as the data in db.json using http request and effect hook. Run the db with \"npm run server\"\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n  }, [])\n\n  const personsToShow = persons.filter((p) =>\n    p.name.toLowerCase().includes(searchString.toLowerCase())\n  )\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    }\n\n    const existingPerson = persons.find(P => P.name === personObject.name)\n\n    // If there is already a person in the database with same name, promt user with question whether the number of the person should be updated.\n    if (existingPerson) {\n      if (window.confirm(`${personObject.name} is already added to phonebook, replace the old number with the new one?`)) {\n        personObject.id = existingPerson.id\n        personService\n          .update(existingPerson.id, personObject)\n          .then(updatedPerson => {\n            const updatedPersons = [...persons]\n            let toUpdate = updatedPersons.find(p => p.id === updatedPerson.data.id)\n            toUpdate.number = updatedPerson.data.number\n            setPersons(updatedPersons)\n            setNotificationMessage(`The number of ${existingPerson.name} changed to ${updatedPerson.data.number}`)\n            setTimeout(() => (setNotificationMessage(null)), 4000)\n          })\n          .catch(error => {\n            setErrorMessage(`The person ${existingPerson.name} has already been deleted from server`)\n            setTimeout(() => setErrorMessage(null), 4000)\n            setPersons(persons.filter(p => p.id !== personObject.id))\n          })\n      }\n\n    } else {\n      personService\n        .create(personObject)\n        .then(response => personObject.id = response.data.id)\n      setPersons(persons.concat(personObject))\n      setNotificationMessage(`Added ${personObject.name}`)\n      setTimeout(() => (setNotificationMessage(null)), 4000)\n    }\n  }\n\n  const handleDelete = (person) => {\n    if (window.confirm(`Are you sure you want to delete ${person.name}?`)) {\n      personService\n        .remove(person.id)\n      setPersons(persons.filter(p => p.id !== person.id))\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} />\n      <Error message={errorMessage} />\n      <SearchFilter\n        searchString={searchString}\n        setSearchString={setSearchString}\n      />\n\n      <h2>add a new</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        setNewName={setNewName}\n        newNumber={newNumber}\n        setNewNumber={setNewNumber}\n      />\n\n      <h2>Numbers</h2>\n      <Persons personsToShow={personsToShow} handleDelete={handleDelete} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}